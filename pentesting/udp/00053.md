---
title: 53 - DNS
badge: 53/UDP
---


## Enumeration

Information that can be gathered

### Banner

```shell
dig version.bind CHAOS TXT @{{ dns-ip 10.10.10.16 }}
```

### Zone Transfer Attack

If the DNS allows it, a lot of domains / subdomains can be enumerated using this method.

<smart-tabs variable="axfr-with-domain" :tabs="{'with': 'With domain', 'without': 'Without domain'}">
<template v-slot:without>

```shell
dig AXFR @{{ dns-ip 10.10.10.16 }}
```

</template>
<template v-slot:with>

```shell
dig AXFR @{{ dns-ip 10.10.10.16 }} {{ domain htb.local }}
```

</template>
</smart-tabs>

### Useful queries

Using `dig` the general syntax would be:

```shell
dig {{ dns-query A }} @{{ dns-ip 10.10.10.16 }} {{ domain htb.local }}
```

The following queryes might be usefull for you

- `ANY`: Any information for a domain.
  - <code>dig ANY @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> <smart-variable variable="domain" default-value="htb.local"></smart-variable></code>
- `A`: regular DNS query.
  - <code>dig A @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> <smart-variable variable="domain" default-value="htb.local"></smart-variable></code>
- `AAAA`: regular DNS query but IPv6.
  - <code>dig AAAA @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> <smart-variable variable="domain" default-value="htb.local"></smart-variable></code>
- `TXT`: plaintext information.
  - <code>dig TXT @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> <smart-variable variable="domain" default-value="htb.local"></smart-variable></code>
- `MX`: mail servers.
  - <code>dig MX @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> <smart-variable variable="domain" default-value="htb.local"></smart-variable></code>
- `NS`: DNS resolving a domain name.
  - <code>dig NS @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> <smart-variable variable="domain" default-value="htb.local"></smart-variable></code>
- Reverse lookup: Get domain for an IP
  - <code>dig @<smart-variable variable="dns-ip" default-value="10.10.10.16"></smart-variable> -x <smart-variable variable="target-ip" default-value="10.10.10.16"></smart-variable></code>

### Reverse lookup

Grabs a domain given its IP. Very usefull when looking for VHosts or when attacking DCs. Works for IPv6 too.

```shell
dig @{{ dns-ip 10.10.10.16 }} -x {{ target-ip 10.10.10.16 }}
```

### Commands to check on blackbox

When attacking DCs i usually run the following commands:

```shell
dig @{{ dns-ip 10.10.10.16 }} -x {{ dns-ip 10.10.10.16 }}
dig AXFR @{{ dns-ip 10.10.10.16 }}
```
