---
title: 389, 636, 3268, 3269 - LDAP
position: 389
badge: 389,636,3268,3269/TCP
description: LDAP (Lightweight Directory Access Protocol)
---


## Basic info

**Default port**: 389 and 636(ldaps). Global Catalog (LDAP in ActiveDirectory) is available by default on ports 3268, and 3269 for LDAPS.

## Enumeration

### Active Directory Domain information (`ldapdomaindump`)

With **valid credentials** to login into the LDAP server, the `ldapdomaindump` tool can recover a lot of usefull information about the Active Directory Domain you are targeting:

```shell
ldapdomaindump -u "{{ domain htb.local }}\{{ username wiener }}" -p "{{ password peter }}" {{ rhost 10.10.10.27 }}
```

This will output several files with the domain information in different formats. To quickly get a grasp of everything take a look on the html files:

```shell
python -m http.server {{ lport 8080 }}
```

### Manually (`ldapsearch`)

Nice tool to interact and obtain information through LDAP.
I personally use it on blackbox approaches without credentials:

1. First you need a base dn (either from `nmap -sV`, DNS or through `ldapsearch`):

    ```shell
    ldapsearch -x -H "ldap://{{ rhost 10.10.10.27 }}" -s base namingcontexts | grep "namingcontexts:" | awk {'print $2'}
    ```

2. Then you can specify it with `-b`. You never know what information you can find:

    ```shell
    ldapsearch -x -H "ldap://{{ rhost 10.10.10.27 }}" -b "{{ base-dn DC=HTB,DC=LOCAL }}"
    ```
